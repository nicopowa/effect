/*
ILUSIO 2020 https://blog.ilusio.dev
The Closure Library Authors - Apache-2.0
*/
(function(){
'use strict';var e=this||self;function p(a,d){a=a.split(".");var b=e;a[0]in b||"undefined"==typeof b.execScript||b.execScript("var "+a[0]);for(var f;a.length&&(f=a.shift());)a.length||void 0===d?b[f]&&b[f]!==Object.prototype[f]?b=b[f]:b=b[f]={}:b[f]=d};p("DEBUG",!0);function q(a,d,b,f,c,h,k){c=c++||1;this.g={h:+a.getAttribute("data-ef")||++r,j:a,o:c,L:c,i:0,u:{},s:d,C:b,K:f||t,I:h||!1,D:k||function(){},J:2};a.setAttribute("data-ef",this.g.h);console.log("effect",this.g.h,this.g.j.nodeName,this.g.s,"frames","delay",this.g.o)}var r;q.prototype.play=function(){this.g.i=0;var a=this,d=new Promise(function(b){a.g.G=b});u(a.g);return d};q.prototype.stop=function(){return w(this.g.h)};
function u(a){a.I&&w(a.h);q.g.push(a);q.l||(console.log("start frame loop"),q.l=window.requestAnimationFrame(function(d){q.m=d;q.B(q.m)}))}function w(a){q.g=q.g.filter(function(d){return d.h!=a});return a}
q.B=function(a){var d=this;if(!this.g.length)return console.log("end frame loop"),this.l=0;var b=Math.round(.06*(a-this.m));1<b&&console.log("drop",b-1);this.m=a;this.l=window.requestAnimationFrame(this.B.bind(this));for(this.g=this.g.reduce(function(f,c){if(0<--c.o)f.push(c);else{if(0===c.o)for(var h in c.C){for(var k=x(d,c.j.style[h]||window.getComputedStyle(c.j).getPropertyValue(h)),l=x(d,c.C[h]),m=[],n=[],g=0;g<k.length;g++)isNaN(k[g])||n.push(g);for(g=l.length;g<k.length;g++)l.push(k[g]);for(g=
0;g<n.length;g++)m.push(l[n[g]]-k[n[g]]);c.u[h]={A:n,F:m,v:k}}c.i=Math.min(c.s,c.i+b);for(var v in c.u){h=c.u[v];k=h.v.slice(0);for(l=0;l<h.A.length;l++)m=h.A[l],k[m]=c.K(c.i,h.v[m],h.F[l],c.s).toFixed(c.J);c.j.style[v]=k.join("")}c.i<c.s?f.push(c):d.done.push(c)}return f},[]);this.done.length;)a=this.done.shift(),console.log(a.h+" end"),a.o=a.L,a.G(),a.D(a.j)};function t(a,d,b,f){return b*a/f+d}function x(a,d){return String(d).split(a.H).filter(Boolean).map(function(b){return isNaN(b)?b:+b})}
p("Effect",q);q.quartInOut=function(a,d,b,f){return 1>(a/=f/2)?b/2*a*a+d:-b/2*(--a*(a-2)-1)+d};q.quartIn=function(a,d,b,f){return b*(a/=f)*a*a*a+d};q.quartOut=function(a,d,b,f){return-b*((a=a/f-1)*a*a*a-1)+d};q.no=t;q.prototype.stop=q.prototype.stop;q.prototype.play=q.prototype.play;r=0;q.m=0;q.l=0;q.g=[];q.done=[];q.H=/(-?\d+(?:.\d+)?(?:e-?\d+)?)/;}).call(this);
